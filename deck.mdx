import { Notes } from 'mdx-deck'
export { default as theme } from './theme';

# Phoenix

`A new CLI for a new beginning`

---

# Phoenix

`A new CLI for a new beginning`

# ヰヰヰヰ


---

# 驴Qu茅 vamos a ver?

---

# 驴Qu茅 vamos a ver?

`Ponedos los manguitos!`

`Vamos a dar un chapuz贸n en la piscina tobillera!`

---

En este taller introductorio vamos a ver:

---

En este taller introductorio vamos a ver:

- `introducci贸n al CLI`

---

En este taller introductorio vamos a ver:

- `introducci贸n al CLI`
- `una vista panor谩mica del proyecto`

---

# Introducci贸n al CLI

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?
2. C贸mo iniciar `phoenix`

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?
2. C贸mo iniciar `phoenix`
3. Comandos de `phoenix`

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?
2. C贸mo iniciar `phoenix`
3. Comandos de `phoenix`
4. C贸mo a帽adir un nuevo comando

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?
2. C贸mo iniciar `phoenix`
3. Comandos de `phoenix`
4. C贸mo a帽adir un nuevo comando
5. C贸mo a帽adir una nueva tarea

___

# Introducci贸n al CLI
1. 驴Qu茅 es `phoenix`?
2. C贸mo iniciar `phoenix`
3. Comandos de `phoenix`
4. C贸mo a帽adir un nuevo comando
5. C贸mo a帽adir una nueva tarea
6. Tareas del prebuild

___

# 驴Qu茅 es phoenix?

___

# 驴Qu茅 es phoenix?

Interfaz de l铆nea de comandos basada en [gluegun]( https://github.com/infinitered/gluegun).

___

# 驴Qu茅 es phoenix?

Interfaz de l铆nea de comandos basada en [gluegun]( https://github.com/infinitered/gluegun).

Se pueden ejecutar tareas de dos maneras:

___

# 驴Qu茅 es phoenix?

Interfaz de l铆nea de comandos basada en [gluegun]( https://github.com/infinitered/gluegun).

Se pueden ejecutar tareas de dos maneras:

1. bien utilizando extensiones de `gluegun`

___

# 驴Qu茅 es phoenix?

Interfaz de l铆nea de comandos basada en [gluegun]( https://github.com/infinitered/gluegun).

Se pueden ejecutar tareas de dos maneras:

1. bien utilizando extensiones de `gluegun`
2. bien lanzando el script de `node` directamente

---

# C贸mo iniciar phoenix

---

# C贸mo iniciar phoenix

1. Hacer un 'checkout' de la rama:

```bash
git checkout feature-core-DB-145519-webpack-empaquetado-local-dev-server
```

---

# C贸mo iniciar phoenix

2. Cambiar a una versi贸n de node soportado (> v9.6).

_Un cambio de versi贸n de node requiere reconstruir los binarios de node-sass._

```bash
npm rebuild node-sass
```

---

# C贸mo iniciar phoenix

3. Habilitar el toggle de phoenix en _ei.toggles.json_:
```js
"phoenixEnabled": {
  "description": "Enables the phoenix version of the application",
  "ownerTeam": "Core",
  "value": true // <= Change me
}
```

---

# C贸mo iniciar phoenix

4. Instalar phoenix y sus dependencias:
```bash
npm run phoenix-install
```

---

# Comandos de phoenix

---

# Comandos de phoenix

1. `init`

---

# Comandos de phoenix

1. `init`
2. `task`

---

# Comandos de phoenix

1. `init`
2. `task`
3. `phoenix`

---

## `init`

---

## `init`
Inicializa webpack y sirve la aplicaci贸n phoenix.

---

## `init`
Inicializa webpack y sirve la aplicaci贸n phoenix.

Se pide al usuario, mediante un prompt, la confirmaci贸n para lanzar la etapa de prebuild.

---

## `init`
Inicializa webpack y sirve la aplicaci贸n phoenix.

Se pide al usuario, mediante un prompt, la confirmaci贸n para lanzar la etapa de prebuild.

Adem谩s, recibe dos argumentos opcionales: `env` y `endpoint`.

---

## `init`
Inicializa webpack y sirve la aplicaci贸n phoenix.

Se pide al usuario, mediante un prompt, la confirmaci贸n para lanzar la etapa de prebuild.

Adem谩s, recibe dos argumentos opcionales: `env` y `endpoint`.

En ausencia de 茅stos, la aplicaci贸n se levanta con una configuraci贸n por defecto:

- El entorno local (`env`= 'local')
- Contra el endpoint de integrado (`endpoint`= 'ei')

---

## Uso de `init`

---

## Uso de `init`

Levantar phoenix con entorno y endpoint por defecto:

```bash
phoenix init
```

---

## Uso de `init`

Levantar phoenix con entorno y endpoint por defecto:

```bash
phoenix init
```

Levanta phoenix con la configuraci贸n del entorno de integrado y el endpoint por defecto:

```bash
phoenix init ei
```

---

## Uso de `init`

Levantar phoenix con entorno y endpoint por defecto:

```bash
phoenix init
```

Levanta phoenix con la configuraci贸n del entorno de integrado y el endpoint por defecto:

```bash
phoenix init ei
```

Levanta phoenix con la configuraci贸n de entorno local y el endpoint de integrado:

```bash
phoenix init local ei
```

---

## `task`

---

## `task`
Permite lanzar tareas de la fase de prebuild por separado.

---

## `task`
Permite lanzar tareas de la fase de prebuild por separado.

El objetivo es facilitar las labores de desarrollo.

---

## `task`
Permite lanzar tareas de la fase de prebuild por separado.

El objetivo es facilitar las labores de desarrollo.

Recibe el listado de tareas como argumento, separadas por comas y sin espacios.

---

## `task`
Permite lanzar tareas de la fase de prebuild por separado.

El objetivo es facilitar las labores de desarrollo.

Recibe el listado de tareas como argumento, separadas por comas y sin espacios.

N贸tese que las tareas no tienen por qu茅 ser consecutivas.

---

## `task`
Permite lanzar tareas de la fase de prebuild por separado.

El objetivo es facilitar las labores de desarrollo.

Recibe el listado de tareas como argumento, separadas por comas y sin espacios.

N贸tese que las tareas no tienen por qu茅 ser consecutivas.

Sin embargo, han de respetar el orden especificado para el prebuild.

<Notes>Se ver谩 en la seccion 'Tareas del prebuild'</Notes>

---

## Uso de `task`

---

## Uso de `task`
Lanzar las tareas `privateTemplates` y `publicTemplates`:

```bash
phoenix task privateTemplates,publicTemplates
```

---

## `phoenix`

___

## `phoenix`
Despliega un men煤 de ayuda con una descripci贸n corta para cada comando.

```bash
phoenix
```
___

# C贸mo a帽adir un nuevo comando

---

# C贸mo a帽adir un nuevo comando

Para a帽adir un nuevo comando a phoenix, bastar铆a con generar su fichero js correspondiente.

```bash
src/commands/newCommand.js
```

---

# C贸mo a帽adir una nueva tarea

---

# C贸mo a帽adir una nueva tarea

Para crear una nueva tarea, bastar铆a con llevar a cabo unos sencillos pasos.

---

# C贸mo a帽adir una nueva tarea

Para crear una nueva tarea, bastar铆a con llevar a cabo unos sencillos pasos.

1. Modificar `cli.constants.js`

---

# C贸mo a帽adir una nueva tarea

Para crear una nueva tarea, bastar铆a con llevar a cabo unos sencillos pasos.

1. Modificar `cli.constants.js`
2. Modificar `utils.js`

---

# Modificar `cli.constants.js`

---

# Modificar `cli.constants.js`

Incluir la informaci贸n relativa al nuevo comando en el fichero de constantes:

`src/toolbox/cli.constants.js`

---

# Modificar `cli.constants.js`

Incluir la informaci贸n relativa al nuevo comando en el fichero de constantes:

`src/toolbox/cli.constants.js`

* Script a ejecutar

---

# Modificar `cli.constants.js`

Incluir la informaci贸n relativa al nuevo comando en el fichero de constantes:

`src/toolbox/cli.constants.js`

* Script a ejecutar
* Descripci贸n

---

# Modificar `cli.constants.js`

Incluir la informaci贸n relativa al nuevo comando en el fichero de constantes:

`src/toolbox/cli.constants.js`

* Script a ejecutar
* Descripci贸n
* Mensajes de error espec铆ficos si aplica

---

# Modificar `cli.constants.js`

Incluir la informaci贸n relativa al nuevo comando en el fichero de constantes:

`src/toolbox/cli.constants.js`

* Script a ejecutar
* Descripci贸n
* Mensajes de error espec铆ficos si aplica
* Es **importante** a帽adir una entrada a la constante `TASK_DESCRIPTIONS`

---

# Modificar `utils.js`

---

# Modificar `utils.js`
A帽adir la `key:value` correspondiente a la nueva tarea en el objeto que las define.

---

# Modificar `utils.js`
A帽adir la `key:value` correspondiente a la nueva tarea en el objeto que las define.

Se expone en una funci贸n en el fichero `src/toolbox/scripts/utils.js`:

```js
const getGluegunTasks = (init, env, endpoint, skip) => {
  return {
    ...
    newCommand: {
      title: descriptions.newCommand,
      task: newCommand({ args }),
      skip: () => skip
    },
    ...
```

---

# Tareas del prebuild

---

# Tareas del prebuild

El objetivo de estas tareas es:

---

# Tareas del prebuild

El objetivo de estas tareas es:

- `efectuar algunas modificaciones sobre ficheros`

---

# Tareas del prebuild

El objetivo de estas tareas es:

- `efectuar algunas modificaciones sobre ficheros`
- `generar un entorno consistente`

---

# Tareas del prebuild

El objetivo de estas tareas es:

- `efectuar algunas modificaciones sobre ficheros`
- `generar un entorno consistente`

La mayor铆a ser谩n imprescindibles mientras dure el per铆odo de convivencia.

A continuaci贸n se ofrece una descripci贸n de las tareas comentadas.

<Notes>Una vez superado 茅ste, podr谩n eliminarse para aligerar el prebuild. Ha de tenerse en cuenta el orden de ejecuci贸n de las mismas, pues existen dependencias entre ellas.</Notes>

---

- `remove`

Elimina el build previo de phoenix.

---

- `remove`

Elimina el build previo de phoenix.

- `configAndToggles`

En base al entorno y endpoint seleccionados, genera los ficheros de configuraci贸n y toggles de aplicaci贸n.

---

- `remove`

Elimina el build previo de phoenix.

- `configAndToggles`

En base al entorno y endpoint seleccionados, genera los ficheros de configuraci贸n y toggles de aplicaci贸n.

- `webComponents`

Construye el proyecto webComponents.

---

- `copyFiles`

Copia una serie de recursos necesarios para el arranque de phoenix.

---

- `copyFiles`

Copia una serie de recursos necesarios para el arranque de phoenix.

- `transformScripts`

Aplica transformaciones a c贸digo js para el build de webpack.

---

- `copyFiles`

Copia una serie de recursos necesarios para el arranque de phoenix.

- `transformScripts`

Aplica transformaciones a c贸digo js para el build de webpack.

- `compileSass`

Compila el sass.

---

- `privateTemplates`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la parte privada.

---

- `privateTemplates`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la parte privada.

- `privateTemplatesGlobalPosition`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la posici贸n global.

---

- `privateTemplates`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la parte privada.

- `privateTemplatesGlobalPosition`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la posici贸n global.

- `publicTemplates`

Crea un fichero del tipo 'barrel' para juntar todas las plantillas de la parte p煤blica.

---

- `i18n`

Procesa todos los ficheros implicados en la internacionalizaci贸n de los textos de la aplicaci贸n.

---

- `i18n`

Procesa todos los ficheros implicados en la internacionalizaci贸n de los textos de la aplicaci贸n.

- `mixins`

Procesa los mixins.

---

- `i18n`

Procesa todos los ficheros implicados en la internacionalizaci贸n de los textos de la aplicaci贸n.

- `mixins`

Procesa los mixins.

- `validations`

A帽ade validaciones a los ficheros `html`.

___

- `bundles`

Crea los ficheros 'bundle' para cada operativa.

---

# Una vista panor谩mica del proyecto

___

# Una vista panor谩mica del proyecto

1. Build de `webpack` para el entorno de desarrollo

___

# Una vista panor谩mica del proyecto

1. Build de `webpack` para el entorno de desarrollo
2. Build de `webpack` para el resto de los entornos

___

# Una vista panor谩mica del proyecto

1. Build de `webpack` para el entorno de desarrollo
2. Build de `webpack` para el resto de los entornos

Para estos puntos vamos a ver c贸digo.

# :thumbsup:

___

# Webpack - el entorno `dev`

`A poneros los manguitos, vamos a la piscina tobillera!`
___

### Abrid el directorio de `phoenix`:

___

### Abrid el directorio de `phoenix`:

```js
phoenix
- build-src
- docs
- src
```
___

### Abrid el directorio de `phoenix`:

```js
phoenix
- build-src
- docs
- src
webpack.alias.js
webpack.common.config.js
webpack.config.js
webpack.development.config.js
webpack.production.config.js
webpack.server.js
```
___

# Webpack - los entornos de `pro`

___

# Webpack - los entornos de `pro`

Ahora vamos a inspeccionar el directorio `build-dist`.

___

# Webpack - los entornos de `pro`

Ahora vamos a inspeccionar el directorio `build-dist`.

Esta es la primera fase de la configuraci贸n de `pro`.

___

# Webpack - los entornos de `pro`

Ahora vamos a inspeccionar el directorio `build-dist`.

Esta es la primera fase de la configuraci贸n de `pro`.

Es de esperar que el contenido de dicho directorio sufrir谩 cambios.

___

# Webpack - los entornos de `pro`

Ahora vamos a inspeccionar el directorio `build-dist`.

Esta es la primera fase de la configuraci贸n de `pro`.

Es de esperar que el contenido de dicho directorio sufrir谩 cambios.

`Al c贸digo!`

___

# Eso es todo amigos

`Muchas gracias!`